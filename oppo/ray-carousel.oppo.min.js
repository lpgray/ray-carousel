/** ray-carousel v0.1.0 
 * Copyright zhangyang Build: 2015-01-19 12:25:07
 **/!function(a){"use strict";function b(a){if(a in c.style)return!0;a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var b=d.length;b--;)if(d[b]+a in c.style)return!0;return!1}console.log("welcome to use ray-carousel");var c=document.createElement("div"),d="Khtml Ms O Moz Webkit".split(" "),e=!1;if(/msie/i.test(window.navigator.userAgent)){for(var f=3,c=document.createElement("div"),g=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++f+"]><i></i><![endif]-->",g[0];);e=f>4?f:10}else e=!1;a.Detector={isMobile:/iphone|ios|android/i.test(a.navigator.userAgent),ieVersion:e,xhr2:!!(new XMLHttpRequest).upload,cssSupport:b},a.RayCarousel={version:"0.1.0"}}(this),function(a,b,c){"use strict";function d(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}function e(){}function f(a,b,d){var e=this;if(e.toggles.each(function(a,b){b.className=a===e.currentIndex?"active":""}),!l||l>9)b&&b.call(e),a.className="fading",setTimeout(function(){d&&d.call(e)},1e3);else{b&&b.call(e);var f=c(a);f.css({visibility:"visible",display:"none",opacity:1}),f.fadeIn(800,function(){d&&d.call(e)})}}function g(a,b,d){var e=this;if(e.animating=!0,!l||l>9)b&&b.call(e),a.className="leaving active",setTimeout(function(){d&&d.call(e)},800);else{b&&b.call(e);var f=c(a);f.children(".item").each(function(a,b){var f=c(b);1===a?f.animate({left:"100%"},1e3,function(){f.css("left","-100%"),d&&d.call(e)}):f.animate({left:"100%"},1e3,function(){f.css("left","-100%")})})}}function h(){var a=this,b=a.items[a.currentIndex];if(!l||l>9)b.className="fading active",setTimeout(function(){j.call(a),a.animating=!1},700);else{var d=c(b);d.children(".item").css({opacity:1}).each(function(b,d){var e=c(d);e.css("left",-1400),1===b?e.animate({left:0},1e3,function(){j.call(a),a.animating=!1}):e.animate({left:0},1e3)})}}function i(){var a=this,b=a.items[a.currentIndex];if(!l||l>9)b.className="",setTimeout(function(){a.currentIndex++,a.currentIndex===a.items.length&&(a.currentIndex=0),a.nextIndex>=0&&(a.currentIndex=a.nextIndex,a.nextIndex=-1),f.call(a,a.items[a.currentIndex],e,h)},1e3);else{var d=c(b);d.fadeOut(800,function(){a.currentIndex++,a.currentIndex===a.items.length&&(a.currentIndex=0),a.nextIndex>=0&&(a.currentIndex=a.nextIndex,a.nextIndex=-1),f.call(a,a.items[a.currentIndex],e,h)})}}function j(){var a=this,b=0,c=1e3/60,d=1e3*a.option.pause,f=c/d;a.timebar.style.width="0%",a.timing=setInterval(function(){a.pause||(b+=f,b>=1?(a.timebar.style.width="0%",clearInterval(a.timing),g.call(a,a.items[a.currentIndex],e,i)):a.timebar.style.width=100*b+"%")},c)}function k(a){var b=document.getElementById(a.domId);if(b){var j=d(b.children),k=document.createElement("div");k.className="toggles",b.appendChild(k);var l="";j.each(function(){l+="<span></span>"}),k.innerHTML=l;var m=d(k.children),n=document.createElement("div");n.className="timebar",b.appendChild(n),n.innerHTML='<div class="inner"></div>';var o=n.children[0];this.items=j,this.toggles=m,this.timebar=o,this.currentIndex=0,this.option=a;var p=this;p.animating=!0,f.call(p,p.items[p.currentIndex],e,h),this.toggles.each(function(a,b){c(b).on("click",function(){return p.animating?!1:(p.timebar.style.width="0%",clearInterval(p.timing),void g.call(p,p.items[p.currentIndex],e,function(){p.nextIndex=a,i.call(p)}))})})}}var l=a.Detector.IEVersion;Array.prototype.each||(Array.prototype.each=function(a){for(var b=0,c=this.length;c>b&&a.call(this[b],b,this[b],this)!==!1;b++);}),b.Oppo=k}(window,this.RayCarousel,jQuery);